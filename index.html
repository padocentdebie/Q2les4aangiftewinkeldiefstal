<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>PV Matrix - Geconfigureerd</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        :root { --primary: #1d4e89; --success: #28a745; --bg: #f4f7f9; }
        body { font-family: sans-serif; background: var(--bg); padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .config-box { background: #fff5f5; border: 1px dashed red; padding: 10px; margin-bottom: 20px; font-size: 12px; color: #333; }
        .input-sectie { border: 2px solid var(--primary); padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        input, textarea { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .btn { padding: 10px 20px; cursor: pointer; border: none; font-weight: bold; border-radius: 4px; background: var(--primary); color: white; width: 100%; }
        .aangifte-kaart { border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; border-radius: 8px; border-left: 5px solid var(--primary); background: #fff; }
        .pv-foto { width: 100%; max-height: 400px; object-fit: contain; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h1 id="main-title">Laden...</h1>

    <script>
        // ============================================================
        // üõ†Ô∏è ALLES WAT JE MOET CONFIGUREREN (STAP VOOR STAP)
        // ============================================================

        const MIJN_CONFIG = {
            // STAP 1: Je GitHub gegevens voor de afbeeldingen
            github_user: "padocentdebie", 
            github_repo: "Q2les4aangiftewinkeldiefstal",

            // STAP 2: De URL van de GEM (Firebase Database URL)
            gem_url: "https://gemini.google.com/gem/2ba817b11a77",

            // STAP 3: De titel van je pagina
            titel: "PVAangifte les 4",

            // STAP 4: De criteria in de matrix
            criteria: ["Bestanddeelteksten", "Ik-vorm", "7 Gouden W's", "Signalement", "OVT"]
        };

        // STAP 5: De Firebase Sleutels (Alleen aanpassen als je een nieuwe GEM hebt)
        const firebaseConfig = {
            apiKey: "AIzaSyBj8dXkl1rEfyx54_MDy_tYd2P7kAeU8VQ",
            authDomain: "q2les3samirgem.firebaseapp.com",
            databaseURL: MIJN_CONFIG.gem_url, // Pakt automatisch de URL van hierboven
            projectId: "q2les3samirgem",
            appId: "1:8681998187:web:fd08067494a010dc572e2e"
        };

        // ============================================================
        // ‚öôÔ∏è HIERONDER NIETS MEER AANPASSEN (SYSTEEM)
        // ============================================================
    </script>

    <div class="input-sectie">
        <h3>Nieuw PV Indienen</h3>
        <input type="text" id="student-naam" placeholder="Naam verbalisant...">
        <input type="text" id="pv-foto-input" placeholder="Bestandsnaam foto op GitHub (bijv: bewijs.jpg) of volledige URL">
        <textarea id="pv-tekst-input" rows="5" placeholder="Typ hier de PV tekst..."></textarea>
        <button class="btn" onclick="verstuurData()">PUBLICEER NAAR MATRIX</button>
    </div>

    <div id="matrix-feed">Laden van gegevens...</div>
</div>

<script>
    // Systeem initialisatie
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    document.getElementById('main-title').innerText = MIJN_CONFIG.titel;

    function verstuurData() {
        const naam = document.getElementById('student-naam').value;
        const fotoInput = document.getElementById('pv-foto-input').value;
        const tekst = document.getElementById('pv-tekst-input').value;

        // Foto URL logica
        let fotoUrl = fotoInput;
        if(fotoInput && !fotoInput.startsWith('http')) {
            fotoUrl = `https://raw.githubusercontent.com/${MIJN_CONFIG.github_user}/${MIJN_CONFIG.github_repo}/main/${fotoInput}`;
        }

        database.ref('matrix_data').push({
            naam: naam,
            foto: fotoUrl,
            tekst: tekst,
            datum: new Date().toLocaleString('nl-NL')
        }).then(() => {
            alert("Gepubliceerd!");
            document.getElementById('pv-foto-input').value = "";
            document.getElementById('pv-tekst-input').value = "";
        });
    }

    database.ref('matrix_data').on('value', (snap) => {
        const feed = document.getElementById('matrix-feed');
        feed.innerHTML = '';
        const data = snap.val();
        if(!data) return;
        Object.keys(data).reverse().forEach(key => {
            const item = data[key];
            const kaart = document.createElement('div');
            kaart.className = 'aangifte-kaart';
            kaart.innerHTML = `
                <strong>${item.naam}</strong> <small>(${item.datum})</small><br>
                ${item.foto ? `<img src="${item.foto}" class="pv-foto">` : ''}
                <div style="margin-top:10px;">${item.tekst}</div>
            `;
            feed.appendChild(kaart);
        });
    });
</script>
</body>
</html>
